"use strict";var app=angular.module("typertlApp",[]);app.run(function(t){t.$on("fonts:update",function(e,n){t.hrefFonts=n})}),app.controller("typertlCtrl",function(t,e,n){function r(t){var e={},n=document.getElementsByTagName(t)[0];return e.fontFamily=window.getComputedStyle(n,null).getPropertyValue("font-family"),e.fontSize=window.getComputedStyle(n,null).getPropertyValue("font-size"),e.fontWeight=window.getComputedStyle(n,null).getPropertyValue("font-weight"),e.lineHeight=window.getComputedStyle(n,null).getPropertyValue("line-height"),e.marginTop=window.getComputedStyle(n,null).getPropertyValue("margin-top"),e.marginBottom=window.getComputedStyle(n,null).getPropertyValue("margin-bottom"),e.opacity=window.getComputedStyle(n,null).getPropertyValue("opacity"),e.wordSpacing=window.getComputedStyle(n,null).getPropertyValue("word-spacing"),e.textAlign=window.getComputedStyle(n,null).getPropertyValue("text-align"),e}t.textAlignments=[{name:"Center",value:"center"},{name:"Right",value:"right"},{name:"Left",value:"left"}],t.tags=[{type:"H1",value:"h1",font:"",size:32,weight:900,lineHeight:1,marginTop:0,marginBottom:10,opacity:1,wordSpacing:0,textAlign:"right"},{type:"H2",value:"h2",font:"",size:24,weight:900,lineHeight:1,marginTop:30,marginBottom:5,opacity:1,wordSpacing:0,textAlign:"right"},{type:"H3",value:"h3",font:"",size:18,weight:900,lineHeight:1,marginTop:30,marginBottom:5,opacity:1,wordSpacing:0,textAlign:"right"},{type:"P",value:"p",font:"",size:17,weight:400,lineHeight:1.5,marginTop:0,marginBottom:25,opacity:.7,wordSpacing:-.1,textAlign:"right"}],e.get("scripts/app/data.json").success(function(e){t.fonts=e,t.tags.forEach(function(n){t.currentSelectedFont=n.font=e[0].value})}),t.fontURl=[],t.currentSelectedTag="h1",t.currentSelectedFont="",t.currentSelectedFontSize=t.tags[0].size,t.currentSelectedFontWeight=t.tags[0].weight,t.currentSelectedLineHeight=t.tags[0].lineHeight,t.currentSelectedMarginTop=t.tags[0].marginTop,t.currentSelectedMarginBottom=t.tags[0].marginBottom,t.currentSelectedOpacity=t.tags[0].opacity,t.currentSelectedWordSpacing=t.tags[0].wordSpacing,t.currentSelectedAlignment=t.tags[0].textAlign,t.selectTag=function(e){t.currentSelectedTag=e.value,t.currentSelectedFont=e.font,t.currentSelectedFontSize=e.size,t.currentSelectedFontWeight=e.weight,t.currentSelectedLineHeight=e.lineHeight,t.currentSelectedMarginTop=e.marginTop,t.currentSelectedMarginBottom=e.marginBottom,t.currentSelectedOpacity=e.opacity,t.currentSelectedWordSpacing=e.wordSpacing,t.currentSelectedAlignment=e.textAlign},t.selectFont=function(){var e=g(t.currentSelectedTag);t.tags[e].font=t.currentSelectedFont,angular.forEach(t.tags,function(n,r){t.tags[e].value==n.value&&(t.fontURl[r]=t.tags[e].font)}),i()},t.selectFontSize=function(){var e=g(t.currentSelectedTag);t.tags[e].size=t.currentSelectedFontSize};var i=function(){var e=t.tags.map(function(t){return t.font}),n=e.filter(function(t,n){return e.indexOf(t)==n}),r=t.fonts.filter(function(t){return n.indexOf(t.value)!=-1}),i=r.map(function(t){return t.href});t.$emit("fonts:update",i)},o=function(e){return t.tags.filter(function(t){return t.value==e})},g=function(e){return t.tags.map(function(t){return t.value}).indexOf(e)};t.getFont=function(t){return o(t)[0].font},t.getFontSize=function(t){return o(t)[0].size+"px"},t.selectFontWeight=function(){var e=g(t.currentSelectedTag);t.tags[e].weight=t.currentSelectedFontWeight},t.getFontWeight=function(t){return o(t)[0].weight},t.selectLineHeight=function(){var e=g(t.currentSelectedTag);t.tags[e].lineHeight=t.currentSelectedLineHeight},t.getLineHeight=function(t){return o(t)[0].lineHeight},t.selectMarginTop=function(){var e=g(t.currentSelectedTag);t.tags[e].marginTop=t.currentSelectedMarginTop},t.getMarginTop=function(t){return o(t)[0].marginTop+"px"},t.selectMarginBottom=function(){var e=g(t.currentSelectedTag);t.tags[e].marginBottom=t.currentSelectedMarginBottom},t.getMarginBottom=function(t){return o(t)[0].marginBottom+"px"},t.selectOpacity=function(){var e=g(t.currentSelectedTag);t.tags[e].opacity=t.currentSelectedOpacity},t.getOpacity=function(t){return o(t)[0].opacity},t.selectWordSpacing=function(){var e=g(t.currentSelectedTag);t.tags[e].wordSpacing=t.currentSelectedWordSpacing},t.getWordSpacing=function(t){return o(t)[0].wordSpacing+"px"},t.selectTextAlignment=function(){var e=g(t.currentSelectedTag);t.tags[e].textAlign=t.currentSelectedAlignment},t.getTextAlignment=function(t){return o(t)[0].textAlign},t.h1="",t.h2="",t.h3="",t.p="",t.isCopyStyle=!1,t.resetToCopy=function(){n(function(){t.isCopyStyle=!1},1500)},t.fontFamilyURL=[],t.getCssCode=function(){t.h1=r("h1"),t.h2=r("h2"),t.h3=r("h3"),t.p=r("p"),angular.forEach(t.fontURl,function(e,n){t.fontFamilyURL.push({url:e+"|"})}),t.fontFamilyURL[t.fontFamilyURL.length-1].url=t.fontFamilyURL[t.fontFamilyURL.length-1].url.slice(0,t.fontFamilyURL[t.fontFamilyURL.length-1].url.length-1)}});